[{"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\index.js":"1","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\App.js":"2","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\context.js":"3","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\firebase.js":"4","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Login2.js":"5","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Dashboard.js":"6","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Navigation.js":"7","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Header.js":"8","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\DashboardPanel.js":"9","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Users.js":"10","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Collection.js":"11","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Profile.js":"12","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\ApiGenerator.js":"13","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\NewEntry.js":"14","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\EditEntry.js":"15"},{"size":572,"mtime":1612346237067,"results":"16","hashOfConfig":"17"},{"size":3293,"mtime":1612450574905,"results":"18","hashOfConfig":"17"},{"size":2273,"mtime":1612446774035,"results":"19","hashOfConfig":"17"},{"size":574,"mtime":1611763187113,"results":"20","hashOfConfig":"17"},{"size":2670,"mtime":1612455415075,"results":"21","hashOfConfig":"17"},{"size":1329,"mtime":1612351604630,"results":"22","hashOfConfig":"17"},{"size":4363,"mtime":1612452561606,"results":"23","hashOfConfig":"17"},{"size":1681,"mtime":1612171999087,"results":"24","hashOfConfig":"17"},{"size":2285,"mtime":1612452561605,"results":"25","hashOfConfig":"17"},{"size":5788,"mtime":1612473827439,"results":"26","hashOfConfig":"17"},{"size":7073,"mtime":1612452561603,"results":"27","hashOfConfig":"17"},{"size":1668,"mtime":1612473523597,"results":"28","hashOfConfig":"17"},{"size":111,"mtime":1611741714461,"results":"29","hashOfConfig":"17"},{"size":3678,"mtime":1612446774023,"results":"30","hashOfConfig":"17"},{"size":4393,"mtime":1612438680446,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1gyl5h9",{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"34"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"34"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"34"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\index.js",[],["67","68"],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\App.js",["69"],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\context.js",[],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\firebase.js",[],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Login2.js",["70","71"],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Dashboard.js",["72","73"],"import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\r\n\r\n//import components\r\nimport Navigation from \"./Navigation\";\r\nimport Header from \"./Header\";\r\nimport DashboardPanel from \"./DashboardPanel\";\r\nimport Users from \"./Users\";\r\nimport Collection from \"./Collection\";\r\nimport Profile from \"./Profile\";\r\nimport ApiGenerator from \"./ApiGenerator\";\r\n\r\nexport default function Dashboard() {\r\n  console.log(window.location.pathname);\r\n\r\n  const [title, setTitle] = useState(\"not found\");\r\n\r\n  useEffect(() => {\r\n    setTitle(window.location.pathname);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"dashboard__appWrapper\">\r\n      <Navigation setTitle={setTitle} />\r\n      <div className=\"container\">\r\n        <Header />\r\n        <div className=\"dashboard__container\">\r\n          <h1 className=\"dashboard__title\">{title}</h1>\r\n          <Switch>\r\n            <Route path=\"/\" exact component={DashboardPanel} />\r\n            <Route path=\"/users\" exact component={Users} />\r\n            <Route path=\"/collection\" exact component={Collection} />\r\n            <Route path=\"/profile\" exact component={Profile} />\r\n            <Route path=\"/api-generator\" exact component={ApiGenerator} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Navigation.js",["74","75"],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Header.js",["76","77","78"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport {Link} from 'react-router-dom'\r\nimport { AuthContext, DataContext } from \"../context\";\r\nimport firebase from \"../firebase\";\r\nimport { db } from \"../firebase\";\r\nimport \"./styles/header.css\";\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\nexport default function Header() {\r\n  const { user } = useContext(AuthContext); //current user info\r\n  const { userData } = useContext(DataContext)\r\n\r\n  const [currentUserRole, setCurrentUserRole] = useState(\"editor\"); //current users role\r\n\r\n \r\n  //match users database to current user and set current role\r\n  useEffect(() => {\r\n    userData.forEach((currUser) => {\r\n      if (currUser.email == user.email) {\r\n        setCurrentUserRole(currUser.role);\r\n      }\r\n    });\r\n  }, [userData]);\r\n\r\n  const logOut = () => {\r\n    firebase.auth().signOut();\r\n  };\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header__userInfo\">\r\n      <Link style={{display:\"flex\", color:\"black\", alignItems:\"center\", marginRight: \"0rem\"}}to=\"/profile\">\r\n        <Avatar src={user.photoURL} style={{marginRight: \"8px\"}}/>\r\n        <div>\r\n        <p>{user.displayName}</p>\r\n        <p style={{ opacity: \"0.5\", fontSize: \"8px\" }}>, {currentUserRole}</p>\r\n        </div>\r\n        </Link>\r\n      </div>\r\n      <button onClick={logOut}>log out</button>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\DashboardPanel.js",["79","80"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext, DataContext } from \"../context\";\r\nimport \"./styles/dashboard.css\";\r\n\r\nexport default function DashboardPanel() {\r\n  const { user } = useContext(AuthContext);\r\n  const { userData, collections, setCollections } = useContext(DataContext);\r\n  const [currUser, setCurrUser] = useState(undefined);\r\n  const [userCollection, setUserCollection] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const foundUser = userData.find((x) => x.email === user.email);\r\n\r\n    // console.log(collections);\r\n    if (foundUser !== undefined) {\r\n      setCurrUser(foundUser);\r\n    }\r\n  }, [userData]);\r\n\r\n  useEffect(() => {\r\n    if (currUser !== undefined) {\r\n      // Get all the collection object that the user should have access to\r\n      const filtered = collections.filter((item) =>\r\n        currUser.access.includes(item.collection)\r\n      );\r\n      setUserCollection(filtered);\r\n    }\r\n  }, [currUser, collections]);\r\n\r\n  const collectionList = userCollection.map((item, index) => (\r\n    <React.Fragment key={index}>\r\n      <div>{item.collection}</div>\r\n      <div>{item.documentCount}</div>\r\n      <div>3</div>\r\n    </React.Fragment>\r\n  ));\r\n  return (\r\n    <div>\r\n      <h1>Welcome, {user.displayName}!</h1>\r\n      <div>\r\n        <h4>Your collections:</h4>\r\n\r\n        {/* collection titles */}\r\n        <div className=\"dashboard__grid\">\r\n          <h4>name</h4>\r\n          <h4># of entries</h4>\r\n          <h4># of editors</h4>\r\n          {collectionList}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Users.js",["81"],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Collection.js",["82","83","84"],"import React, { useEffect, useState, useContext } from \"react\";\r\nimport queryString from \"query-string\";\r\nimport NewEntry from \"./NewEntry\";\r\nimport EditEntry from \"./EditEntry\";\r\nimport { AuthContext, DataContext } from \"../context\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport { confirmAlert } from 'react-confirm-alert'; \r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\nimport \"./styles/collection.css\";\r\n\r\nexport default function Collection(props) {\r\n  const { user } = useContext(AuthContext);\r\n  const { userData, refreshCollections, setRefreshCollections } = useContext(DataContext);\r\n  const [addMode, setAddMode] = useState(false);\r\n  const [currEndPoint, setCurrEndPoint] = useState(\"\");\r\n  const [currCollection, setCurrCollection] = useState([]);\r\n  const [productToEdit, setProductToEdit] = useState([]);\r\n  const [allowAccess, setAllowAccess] = useState(true);\r\n\r\n  useEffect(() => {\r\n     console.log('collection component rerenderd')\r\n  }, [currCollection])\r\n\r\n  useEffect(() => {\r\n    const collectionQs = queryString.parse(window.location.search);\r\n    const foundUser = userData.find((x) => x.email === user.email); // Get the current user object that contains the data access\r\n    // If the user has the requeststring in his access array we allow him access\r\n\r\n    if (foundUser && foundUser.access.includes(collectionQs.name)) {\r\n      //Get the collection from the url\r\n      setCurrEndPoint(collectionQs.name);\r\n      setAllowAccess(true);\r\n\r\n      const getCollection = async () => {\r\n        try {\r\n          const response = await fetch(\r\n            `https://efni-api.herokuapp.com/${collectionQs.name}`\r\n          );\r\n          const data = await response.json();\r\n          setCurrCollection(data);\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      };\r\n      getCollection();\r\n    } else {\r\n      setAllowAccess(false);\r\n    }\r\n  }, [window.location.search]);\r\n\r\n  const toggleAddMode = () => {\r\n    setAddMode(!addMode);\r\n  };\r\n\r\n\r\n  // Handle when delete button is clicked\r\n  const handleDelete = async (id) => {\r\n    const idToken = await firebase.auth().currentUser.getIdToken(/* forceRefresh */ true);\r\n\r\n    try {\r\n      const r = await fetch(`https://efni-api.herokuapp.com/${currEndPoint}/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: {'Content-Type': 'application/json', 'Authorization': idToken}\r\n      });\r\n      const data = await r.json();\r\n      if(data.msg) {\r\n        return;\r\n      } else {\r\n        setRefreshCollections(!refreshCollections);\r\n        setCurrCollection(currCollection.filter((product) => id !== product._id));\r\n      }\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n    // Fetch from the api with DELETE method to delete from database\r\n    // fetch(`http://localhost:5000/${currEndPoint}/${id}`, {\r\n    // })\r\n    //   .then((r) => {\r\n    //     const data = r.json()\r\n    //     console.log('data is: ', data);\r\n        \r\n    //   })\r\n    //   // Filtering and finding the object to remove from id\r\n    //     console.log('R is: ', data);\r\n        // setCurrCollection(\r\n        // currCollection.filter((product) => id !== product._id)\r\n      \r\n        \r\n    //   )\r\n    //   .catch((error) => console.error(error));\r\n  };\r\n  \r\n\r\n  const toggleEdit = (index) => {\r\n    const currCollectionCopy = [...currCollection];\r\n    setProductToEdit('')\r\n    if (currCollectionCopy[index].editMode !== true) {\r\n      currCollectionCopy.forEach((product) => {\r\n        product.editMode = false;\r\n      });\r\n      setProductToEdit(currCollectionCopy[index]);\r\n    }\r\n    currCollectionCopy[index].editMode = !currCollectionCopy[index].editMode;\r\n    setCurrCollection(currCollectionCopy);\r\n  };\r\n\r\n  // Confirm alert using react-confirm-alert module\r\n  const handleAlert = (id) => {\r\n    confirmAlert({\r\n        title: 'Delete product!',\r\n        message: 'Are you sure?',\r\n        buttons: [\r\n          {\r\n            label: 'Yes',\r\n            onClick: () => handleDelete(id)\r\n          },\r\n          {\r\n            label: 'No',\r\n            onClick: () => handleAlert()\r\n          }\r\n        ]  \r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {allowAccess ? (\r\n        <>\r\n        {addMode ? (\r\n          <NewEntry setCurrCollection={setCurrCollection} currEndPoint={currEndPoint} toggleAddMode={toggleAddMode} />\r\n        ) : null}\r\n        <div>\r\n            <h1>{currEndPoint}</h1>\r\n            <div className=\"collection__listWrapper\">\r\n              <div className=\"collection__entryHeader\">\r\n                <h4>entries:</h4>\r\n                <button className=\"formButtons\" onClick={toggleAddMode}>add new entry</button>\r\n              </div>\r\n              <div className=\"collection__listHeaders\">\r\n                <h4>Name</h4>\r\n                <h4>Price</h4>\r\n                <h4>Image</h4>\r\n                <h4>On sale?</h4>\r\n                <h4>Description</h4>\r\n                <h4></h4>\r\n                <h4></h4>\r\n              </div>\r\n\r\n                {currCollection.map((product, index) => (\r\n                  <div className=\"collection__list\" key={product._id}>\r\n                    <p>{product.productName}</p>\r\n                    <p>{product.productPrice}</p>\r\n                    {product.productImg ? (\r\n                    <a\r\n                      className=\"collection__imageLink\"\r\n                      href={product.productImg}\r\n                      target=\"blank\"\r\n                    >\r\n                      Link to image\r\n                    </a>\r\n                    ) : \"No image\"}\r\n                    <p>{product.productOnSale ? \"true\" : \"false\"}</p>\r\n                    <p>{product.productDescription.length > 50 ?\r\n                      `${product.productDescription.substring(0, 50)} ...`\r\n                      : product.productDescription}</p>\r\n                    <EditIcon className=\"collection__actionIcons\" onClick={() => toggleEdit(index)}/>\r\n                    <DeleteIcon className=\"collection__actionIcons\" onClick={() => handleAlert(product._id)}/>\r\n                    {product.editMode ? (\r\n                        <EditEntry currEndPoint={currEndPoint} id={product._id} currCollection={currCollection} setCurrCollection={setCurrCollection} productToEdit={productToEdit} />\r\n                    ) : null}\r\n                  </div>\r\n                  ))}\r\n                  </div>\r\n                </div>\r\n        </>\r\n      ) : (\r\n        <div>No Access to this collection</div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\Profile.js",[],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\ApiGenerator.js",[],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\NewEntry.js",[],"C:\\Users\\Björg\\Documents\\Vefþróun\\Development\\efni_cms\\src\\components\\EditEntry.js",[],{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","severity":1,"message":"90","line":34,"column":9,"nodeType":"91","messageId":"92","endLine":43,"endColumn":10},{"ruleId":"93","severity":1,"message":"94","line":26,"column":7,"nodeType":"95","endLine":26,"endColumn":35},{"ruleId":"96","severity":1,"message":"97","line":47,"column":13,"nodeType":"98","endLine":47,"endColumn":38},{"ruleId":"99","severity":1,"message":"100","line":2,"column":27,"nodeType":"101","messageId":"102","endLine":2,"endColumn":33},{"ruleId":"99","severity":1,"message":"103","line":2,"column":42,"nodeType":"101","messageId":"102","endLine":2,"endColumn":46},{"ruleId":"99","severity":1,"message":"104","line":10,"column":11,"nodeType":"101","messageId":"102","endLine":10,"endColumn":22},{"ruleId":"99","severity":1,"message":"105","line":11,"column":10,"nodeType":"101","messageId":"102","endLine":11,"endColumn":25},{"ruleId":"99","severity":1,"message":"106","line":5,"column":10,"nodeType":"101","messageId":"102","endLine":5,"endColumn":12},{"ruleId":"107","severity":1,"message":"108","line":19,"column":26,"nodeType":"109","messageId":"110","endLine":19,"endColumn":28},{"ruleId":"111","severity":1,"message":"112","line":23,"column":6,"nodeType":"113","endLine":23,"endColumn":16,"suggestions":"114"},{"ruleId":"99","severity":1,"message":"115","line":7,"column":34,"nodeType":"101","messageId":"102","endLine":7,"endColumn":48},{"ruleId":"111","severity":1,"message":"112","line":18,"column":6,"nodeType":"113","endLine":18,"endColumn":16,"suggestions":"116"},{"ruleId":"99","severity":1,"message":"117","line":7,"column":7,"nodeType":"101","messageId":"102","endLine":7,"endColumn":15},{"ruleId":"111","severity":1,"message":"118","line":52,"column":6,"nodeType":"113","endLine":52,"endColumn":30,"suggestions":"119"},{"ruleId":"120","severity":1,"message":"121","line":148,"column":17,"nodeType":"95","endLine":148,"endColumn":21},{"ruleId":"120","severity":1,"message":"121","line":149,"column":17,"nodeType":"95","endLine":149,"endColumn":21},"no-native-reassign",["122"],"no-negated-in-lhs",["123"],"default-case","Expected a default case.","SwitchStatement","missingDefaultCase","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","'Link' is defined but never used.","'collections' is assigned a value but never used.","'currentUserRole' is assigned a value but never used.","'db' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user.email'. Either include it or remove the dependency array.","ArrayExpression",["124"],"'setCollections' is assigned a value but never used.",["125"],"'CryptoJS' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'user.email' and 'userData'. Either include them or remove the dependency array. Outer scope values like 'window.location.search' aren't valid dependencies because mutating them doesn't re-render the component.",["126"],"jsx-a11y/heading-has-content","Headings must have content and the content must be accessible by a screen reader.","no-global-assign","no-unsafe-negation",{"desc":"127","fix":"128"},{"desc":"127","fix":"129"},{"desc":"127","fix":"130"},"Update the dependencies array to be: [user.email, userData]",{"range":"131","text":"132"},{"range":"133","text":"132"},{"range":"134","text":"132"},[790,800],"[user.email, userData]",[648,658],[1982,2006]]