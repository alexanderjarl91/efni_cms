[{"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\index.js":"1","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\context.js":"2","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\App.js":"3","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\firebase.js":"4","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Login2.js":"5","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Dashboard.js":"6","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Header.js":"7","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Profile.js":"8","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\ApiGenerator.js":"9","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Navigation.js":"10","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Users.js":"11","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\DashboardPanel.js":"12","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Collection.js":"13","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\NewEntry.js":"14","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\EditEntry.js":"15"},{"size":572,"mtime":1612353744558,"results":"16","hashOfConfig":"17"},{"size":2273,"mtime":1612442914480,"results":"18","hashOfConfig":"17"},{"size":3604,"mtime":1612353744542,"results":"19","hashOfConfig":"17"},{"size":574,"mtime":1611753872176,"results":"20","hashOfConfig":"17"},{"size":2795,"mtime":1611683176770,"results":"21","hashOfConfig":"17"},{"size":1329,"mtime":1612353744545,"results":"22","hashOfConfig":"17"},{"size":1681,"mtime":1612191548519,"results":"23","hashOfConfig":"17"},{"size":1473,"mtime":1612019168477,"results":"24","hashOfConfig":"17"},{"size":111,"mtime":1611698395583,"results":"25","hashOfConfig":"17"},{"size":3354,"mtime":1612446548154,"results":"26","hashOfConfig":"17"},{"size":6182,"mtime":1612446548155,"results":"27","hashOfConfig":"17"},{"size":2175,"mtime":1612440107492,"results":"28","hashOfConfig":"17"},{"size":6601,"mtime":1612446548171,"results":"29","hashOfConfig":"17"},{"size":3678,"mtime":1612442957812,"results":"30","hashOfConfig":"17"},{"size":4393,"mtime":1612372448265,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1bfh2gn",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"34"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"34"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\index.js",[],["67","68"],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\context.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\App.js",["69"],"import \"./App.css\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport firebase from \"./firebase\";\r\nimport { AuthContext } from \"./context\";\r\n\r\n//import components\r\nimport Login2 from \"./components/Login2\";\r\nimport Dashboard from \"./components/Dashboard\";\r\n\r\nfunction App() {\r\n  //fetching user state from context\r\n  const { user } = useContext(AuthContext);\r\n\r\n  //declaring local states\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [hasAccount, setHasAccount] = useState(false);\r\n\r\n  const clearErrors = () => {\r\n    setEmailError(\"\");\r\n    setPasswordError(\"\");\r\n  };\r\n\r\n  //sign in using state of email and state of password\r\n  const handleLogin = () => {\r\n    clearErrors();\r\n    firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password)\r\n      .catch((err) => {\r\n        switch (err.code) {\r\n          case \"auth/invalid-email\":\r\n          case \"auth/user-disabled\":\r\n          case \"auth/user-not-found\":\r\n            setEmailError(err.message);\r\n            break;\r\n          case \"auth/wrong-password\":\r\n            setPasswordError(err.message);\r\n            break;\r\n        }\r\n      });\r\n  };\r\n\r\n  //sign up using email and password\r\n  const handleSignup = () => {\r\n    clearErrors();\r\n    firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(email, password)\r\n      //then create a document in the database\r\n      .then(function (user) {\r\n        var userProfile = firebase.auth().currentUser;\r\n\r\n        userProfile\r\n          .updateProfile({\r\n            displayName: name,\r\n            photoURL:\r\n              \"https://herrmans.eu/wp-content/uploads/2019/01/765-default-avatar.png\",\r\n          })\r\n          .then(() => {\r\n            const userUid = user.user.uid;\r\n            const email = user.user.email;\r\n            const name = user.user.displayName;\r\n\r\n            const account = {\r\n              useruid: userUid,\r\n              email: email,\r\n              name: name,\r\n            };\r\n            firebase.firestore().collection(\"users\").doc(email).set(account);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        switch (err.code) {\r\n          case \"auth/email-already-in-use\":\r\n          case \"auth/invalid-email\":\r\n          case \"auth/user-not-found\":\r\n            setEmailError(err.message);\r\n            break;\r\n          case \"auth/weak-password\":\r\n            setPasswordError(err.message);\r\n            break;\r\n          default:\r\n            console.log(err);\r\n        }\r\n      });\r\n  };\r\n\r\n  // //logout function\r\n  // const handleLogout = () => {\r\n  //   firebase.auth().signOut();\r\n  // };\r\n\r\n  // const logUser = () => {\r\n  //   console.log(user);\r\n  // };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {user ? (\r\n        <>\r\n          <Dashboard />\r\n          {/* <button onClick={handleLogout}>log out</button> */}\r\n          {/* <button onClick={logUser}>console log user</button> */}\r\n        </>\r\n      ) : (\r\n        <Login2\r\n          email={email}\r\n          setEmail={setEmail}\r\n          password={password}\r\n          setPassword={setPassword}\r\n          handleLogin={handleLogin}\r\n          handleSignup={handleSignup}\r\n          hasAccount={hasAccount}\r\n          setHasAccount={setHasAccount}\r\n          emailError={emailError}\r\n          passwordError={passwordError}\r\n          name={name}\r\n          setName={setName}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\firebase.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Login2.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Dashboard.js",["70","71"],"import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\r\n\r\n//import components\r\nimport Navigation from \"./Navigation\";\r\nimport Header from \"./Header\";\r\nimport DashboardPanel from \"./DashboardPanel\";\r\nimport Users from \"./Users\";\r\nimport Collection from \"./Collection\";\r\nimport Profile from \"./Profile\";\r\nimport ApiGenerator from \"./ApiGenerator\";\r\n\r\nexport default function Dashboard() {\r\n  console.log(window.location.pathname);\r\n\r\n  const [title, setTitle] = useState(\"not found\");\r\n\r\n  useEffect(() => {\r\n    setTitle(window.location.pathname);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"dashboard__appWrapper\">\r\n      <Navigation setTitle={setTitle} />\r\n      <div className=\"container\">\r\n        <Header />\r\n        <div className=\"dashboard__container\">\r\n          <h1 className=\"dashboard__title\">{title}</h1>\r\n          <Switch>\r\n            <Route path=\"/\" exact component={DashboardPanel} />\r\n            <Route path=\"/users\" exact component={Users} />\r\n            <Route path=\"/collection\" exact component={Collection} />\r\n            <Route path=\"/profile\" exact component={Profile} />\r\n            <Route path=\"/api-generator\" exact component={ApiGenerator} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Header.js",["72","73","74"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext, DataContext } from \"../context\";\r\nimport firebase from \"../firebase\";\r\nimport { db } from \"../firebase\";\r\nimport \"./styles/header.css\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\r\n\r\nexport default function Header() {\r\n  const { user } = useContext(AuthContext); //current user info\r\n  const { userData } = useContext(DataContext);\r\n\r\n  const [currentUserRole, setCurrentUserRole] = useState(\"editor\"); //current users role\r\n\r\n  //match users database to current user and set current role\r\n  useEffect(() => {\r\n    userData.forEach((currUser) => {\r\n      if (currUser.email == user.email) {\r\n        setCurrentUserRole(currUser.role);\r\n      }\r\n    });\r\n  }, [userData]);\r\n\r\n  const logOut = () => {\r\n    firebase.auth().signOut();\r\n  };\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header__userInfo\">\r\n        <Link\r\n          style={{\r\n            display: \"flex\",\r\n            color: \"black\",\r\n            alignItems: \"center\",\r\n            marginRight: \"0rem\",\r\n          }}\r\n          to=\"/profile\"\r\n        >\r\n          <Avatar src={user.photoURL} style={{ marginRight: \"8px\" }} />\r\n          <div className=\"header__userName\">\r\n            <p>{user.displayName}</p>\r\n            <p style={{ opacity: \"0.5\", fontSize: \"8px\" }}>\r\n              , {currentUserRole}\r\n            </p>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n      <ExitToAppIcon\r\n        className=\"header__logout\"\r\n        onClick={logOut}\r\n      ></ExitToAppIcon>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Profile.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\ApiGenerator.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Navigation.js",["75","76"],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Users.js",["77","78"],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\DashboardPanel.js",["79","80"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext, DataContext } from \"../context\";\r\nimport DocumentIcon from '@material-ui/icons/InsertDriveFile';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport \"./styles/dashboard.css\";\r\n\r\nexport default function DashboardPanel() {\r\n  const { user } = useContext(AuthContext);\r\n  const { userData, collections, setCollections } = useContext(DataContext);\r\n  const [currUser, setCurrUser] = useState(undefined);\r\n  const [userCollection, setUserCollection] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log('Dashboardpanel rendering');\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const foundUser = userData.find((x) => x.email === user.email);\r\n\r\n    // console.log(collections);\r\n    if (foundUser !== undefined) {\r\n      setCurrUser(foundUser);\r\n    }\r\n  }, [userData]);\r\n\r\n  useEffect(() => {\r\n    if (currUser !== undefined) {\r\n      console.log('Filtering')\r\n      // Get all the collection object that the user should have access to\r\n      const filtered = collections.filter((item) =>\r\n        currUser.access.includes(item.collection)\r\n      );\r\n      setUserCollection(filtered);\r\n    }\r\n  }, [currUser, collections]);\r\n\r\n  const collectionList = userCollection.map((item, index) => (\r\n    <Link key={index} className=\"card__link\" to={{pathname: \"/collection\", search: `?name=${item.collection}`}}>\r\n      <div className=\"collection__card\">\r\n        <div className=\"card__title\">{item.collection}</div>\r\n        <div className=\"card__document\"><DocumentIcon className=\"document__icon\"/>{item.documentCount}</div>\r\n        <div className=\"card__user\"><PersonIcon className=\"user__icon\"/>3</div>\r\n      </div>\r\n    </Link>\r\n  ));\r\n  return (\r\n    <div>\r\n      <h1>Welcome, {user.displayName}!</h1>\r\n      <div>\r\n        <h4 className=\"dashboard__panel__title\">Your collections:</h4>\r\n\r\n        {/* collection titles */}\r\n        <div className=\"dashboard__grid\">\r\n          {/* <h4>name</h4>\r\n          <h4># of entries</h4>\r\n          <h4># of editors</h4> */}\r\n          {collectionList}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\Collection.js",["81","82","83"],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\NewEntry.js",[],"C:\\Users\\johan\\Documents\\Skóli\\Projects\\Module 5\\efni_cms\\src\\components\\EditEntry.js",[],{"ruleId":"84","replacedBy":"85"},{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","severity":1,"message":"89","line":34,"column":9,"nodeType":"90","messageId":"91","endLine":43,"endColumn":10},{"ruleId":"92","severity":1,"message":"93","line":2,"column":27,"nodeType":"94","messageId":"95","endLine":2,"endColumn":33},{"ruleId":"92","severity":1,"message":"96","line":2,"column":42,"nodeType":"94","messageId":"95","endLine":2,"endColumn":46},{"ruleId":"92","severity":1,"message":"97","line":5,"column":10,"nodeType":"94","messageId":"95","endLine":5,"endColumn":12},{"ruleId":"98","severity":1,"message":"99","line":19,"column":26,"nodeType":"100","messageId":"101","endLine":19,"endColumn":28},{"ruleId":"102","severity":1,"message":"103","line":23,"column":6,"nodeType":"104","endLine":23,"endColumn":16,"suggestions":"105"},{"ruleId":"92","severity":1,"message":"106","line":10,"column":11,"nodeType":"94","messageId":"95","endLine":10,"endColumn":22},{"ruleId":"92","severity":1,"message":"107","line":11,"column":10,"nodeType":"94","messageId":"95","endLine":11,"endColumn":25},{"ruleId":"92","severity":1,"message":"108","line":8,"column":7,"nodeType":"94","messageId":"95","endLine":8,"endColumn":15},{"ruleId":"92","severity":1,"message":"109","line":76,"column":9,"nodeType":"94","messageId":"95","endLine":76,"endColumn":13},{"ruleId":"92","severity":1,"message":"110","line":10,"column":34,"nodeType":"94","messageId":"95","endLine":10,"endColumn":48},{"ruleId":"102","severity":1,"message":"103","line":25,"column":6,"nodeType":"104","endLine":25,"endColumn":16,"suggestions":"111"},{"ruleId":"102","severity":1,"message":"112","line":52,"column":6,"nodeType":"104","endLine":52,"endColumn":30,"suggestions":"113"},{"ruleId":"114","severity":1,"message":"115","line":149,"column":17,"nodeType":"116","endLine":149,"endColumn":21},{"ruleId":"114","severity":1,"message":"115","line":150,"column":17,"nodeType":"116","endLine":150,"endColumn":21},"no-native-reassign",["117"],"no-negated-in-lhs",["118"],"default-case","Expected a default case.","SwitchStatement","missingDefaultCase","no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","'Link' is defined but never used.","'db' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user.email'. Either include it or remove the dependency array.","ArrayExpression",["119"],"'collections' is assigned a value but never used.","'currentUserRole' is assigned a value but never used.","'CryptoJS' is assigned a value but never used.","'gaur' is assigned a value but never used.","'setCollections' is assigned a value but never used.",["120"],"React Hook useEffect has missing dependencies: 'user.email' and 'userData'. Either include them or remove the dependency array. Outer scope values like 'window.location.search' aren't valid dependencies because mutating them doesn't re-render the component.",["121"],"jsx-a11y/heading-has-content","Headings must have content and the content must be accessible by a screen reader.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"122","fix":"123"},{"desc":"122","fix":"124"},{"desc":"122","fix":"125"},"Update the dependencies array to be: [user.email, userData]",{"range":"126","text":"127"},{"range":"128","text":"127"},{"range":"129","text":"127"},[851,861],"[user.email, userData]",[886,896],[2025,2049]]